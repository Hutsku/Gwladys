<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <!-- favicon -->
        <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
        <link rel="manifest" href="/favicon/site.webmanifest">
        
        <!-- Import CSS Bootstrap -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

        <!-- Import custom CSS -->
        <link rel="stylesheet" type="text/css" href="/css/style-navbar.css">
        <title>kita pena</title>
    </head>
 
    <body>
        <header>
            <nav class="navbar navbar-expand-md navbar-light my-md-4">
                <a class="navbar-name col col-md-5" href="/">kita pena</a>
            </nav>
        </header>

        <main class="m-md-0 mb-5" style="align-items:center;">
            <div class="container-fluid m-0 pt-4 text-center" id="imagemapPannel">
                <img class="highlight" name="store" src="img/kitaStore.png">
                <img class="highlight" name="postit" src="img/kitaPostIt.png">
                <img class="highlight" name="login" src="img/kitaLogin.png">
                <img class="highlight" name="faq" src="img/kitaFAQ.png">
                <img class="maparea" src="img/kitapena2.png"  usemap="#image-map">
                <!-- Image Map Generated by http://www.image-map.net/ -->
                <map name="image-map">
                    <area target="" alt="store" title="store" href="/shop" coords="480,2,415,17,343,26,272,43,218,98,169,172,124,184,97,209,80,274,54,306,11,431,3,535,40,595,39,637,102,766,122,748,155,713,188,697,170,608,178,535,194,519,224,454,250,435,330,380,383,375,461,355,534,347,602,323,625,330,784,367,832,395,892,546,923,491,957,409,941,318,906,232,862,177,822,136,774,99,726,33,679,3" shape="poly">
                    <area target="" alt="postit" title="postit" href="/post-it" coords="127,805,147,824,132,868,166,934,191,923,183,875,209,810,270,769,298,803,334,917,355,942,372,900,393,847,420,822,457,831,491,833,545,915,594,863,634,785,697,807,716,871,756,887,825,998,879,1002,909,1058,939,1072,954,1154,930,1253,945,1275,877,1361,675,1363,640,1411,494,1411,464,1395,411,1418,258,1401,103,1339,113,1241,86,1143,85,909,82,825" shape="poly">
                    <area target="" alt="login" title="login" href="/login" coords="174,1385,151,1401,105,1491,85,1570,146,1719,194,1789,260,1811,302,1794,305,1828,426,1850,424,1828,442,1804,438,1782,510,1745,526,1781,521,1831,643,1809,638,1774,704,1740,738,1755,737,1799,731,1844,795,1952,842,1933,867,1888,876,1814,898,1814,988,1909,997,1836,988,1770,994,1675,977,1566,948,1504,901,1430,850,1423,823,1396,712,1385,694,1364,674,1363,645,1409,495,1409,465,1391,410,1419,290,1401,268,1413,246,1388" shape="poly">
                    <area target="" alt="faq" title="faq" href="/faq" coords="130,1745,113,1775,126,1879,111,1951,128,2011,126,2102,166,2190,277,2225,354,2205,405,2214,485,2187,564,2173,608,2219,651,2190,667,2240,712,2262,725,2237,786,2291,854,2285,957,2206,982,2134,980,2069,966,2030,930,2025,882,2041,847,2011,781,1978,771,1961,716,1934,699,1863,674,1816,624,1804,541,1833,513,1834,459,1853,372,1843,274,1821,203,1797,158,1781" shape="poly">
                </map>
            </div>
        </main>
        <footer>
            <%- include('footer') %>
        </footer>
    </body>

    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="imageMapResizer.min.js"></script>

    <script type="text/javascript">
        $(function() {
            $('map').imageMapResize();
            //$('.maparea').maphilight();

            $('.highlight').css('left', $('.maparea').offset().left);
            $('area[alt="store"]').hover(function(event) {
                    $('.highlight[name="store"]').addClass('hover');
                }, function (event) {
                    $('.highlight[name="store"]').removeClass('hover');
                }
            );
            $('area[alt="postit"]').hover(function(event) {
                    $('.highlight[name="postit"]').addClass('hover');
                }, function (event) {
                    $('.highlight[name="postit"]').removeClass('hover');
                }
            );
            $('area[alt="login"]').hover(function(event) {
                    $('.highlight[name="login"]').addClass('hover');
                }, function (event) {
                    $('.highlight[name="login"]').removeClass('hover');
                }
            );
            $('area[alt="faq"]').hover(function(event) {
                    $('.highlight[name="faq"]').addClass('hover');
                }, function (event) {
                    $('.highlight[name="faq"]').removeClass('hover');
                }
            );
        });

        /*$('area').on("mousemove", function( event ) {
            let left = event.pageX - $(this).offset().left;
            let top = event.pageY - $(this).offset().top;

            // array of coordinates of each vertex of the polygon
            let coordsStr = $('area').attr("coords").split(',');
            let coord = [];
            for (i=1; i<=coordsStr.length; i++) {
                if (i%2) coord.push([parseInt(coordsStr[i-1]), parseInt(coordsStr[i])])
            }
            
            console.log("move");
            if (inside([ left, top ], coord)) {
                console.log('mouse inside');
                //$('img[usemap="#store"]').addClass('hover');
            } else {
                console.log('mouse outside')
                //$('.maparea').removeClass('hover');
            }; 
        });*/

        /*function inside(point, vs) {
            // ray-casting algorithm based on
            // https://wrf.ecse.rpi.edu/Research/Short_Notes/pnpoly.html
            
            var x = point[0], y = point[1];
            
            var inside = false;
            for (var i = 0, j = vs.length - 1; i < vs.length; j = i++) {
                var xi = vs[i][0], yi = vs[i][1];
                var xj = vs[j][0], yj = vs[j][1];
                
                var intersect = ((yi > y) != (yj > y))
                    && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);
                if (intersect) inside = !inside;
            }
            
            return inside;
        };*/
    </script>

</html>